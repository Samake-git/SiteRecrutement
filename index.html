<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site de Recrutement</title>

  <!-- Feuille de style principale -->
  <link rel="stylesheet" href="styles.css">

  <!-- Styles supplémentaires -->
  <style>
    /* Section Caméra */
    .camera-section {
      background-color: #f8f9fa;
      padding: 40px 0;
      text-align: center;
      margin: 30px 0;
      border-radius: 8px;
    }

    .camera-container {
      max-width: 600px;
      margin: 0 auto;
    }

    .camera-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 20px 0;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .camera-btn:hover {
      background-color: #45a049;
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0,0,0,0.15);
    }

    .camera-btn i {
      margin-right: 10px;
    }

    .video-container {
      margin-top: 20px;
      display: none;
    }

    video {
      width: 100%;
      max-width: 500px;
      border-radius: 8px;
      border: 2px solid #ddd;
    }

    .camera-description {
      color: #555;
      margin-bottom: 20px;
    }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore-compat.js"></script>

  <script>
    // Configuration Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCfjS6ArSb2zo60xJ0bg0PTv_lmGDmJaSc",
      authDomain: "site-recrutement-4cb95.firebaseapp.com",
      projectId: "site-recrutement-4cb95",
      storageBucket: "site-recrutement-4cb95.appspot.com",
      messagingSenderId: "810818646565",
      appId: "1:810818646565:web:d5afb035cc2f24a9b245cc"
    };

    // Initialisation Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <!-- Icônes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="logo-container">
        <img src="images/logosSite.png" alt="Logo Recrutement Pro" class="logo">
      </div>
      <h1>Recrutement Pro</h1>
      <nav>
        <ul>
          <li><a href="#home">Accueil</a></li>
          <li><a href="#jobs">Offres</a></li>
          <li><a href="#apply">Candidature</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Section Accueil -->
  <section id="home">
    <div class="container">
      <h2>Bienvenue sur Recrutement Pro</h2>
      <p>Trouvez votre emploi de rêve dès aujourd'hui au Mali!</p>
      <img src="images/img78.jpg" alt="Image de recrutement" class="home-image">
    </div>
  </section>

  <!-- Section Caméra -->
  <section class="camera-section">
    <div class="camera-container">
      <h2>Entretien Vidéo</h2>
      <p class="camera-description">
        Pour certains postes, nous proposons un entretien vidéo.  
        Cliquez sur le bouton ci-dessous pour tester votre caméra et microphone.
      </p>

      <button id="startCamera" class="camera-btn">
        <i class="fas fa-video"></i> Activer la caméra
      </button>

      <div class="video-container">
        <video id="video" autoplay playsinline></video>
      </div>
    </div>
  </section>

  <!-- Section Offres -->
  <section id="jobs">
    <div class="container">
      <h2>Offres d'emploi disponibles (Postulez maintenant)</h2>
      <ul>
        <li>
          <a href="job-details.html?title=Développeur%20Web&location=Bamako&contract=CDI&salary=800000%20à%201200000%20FCFA%20par%20mois&company=Tech%20Innovators&description=Nous%20recherchons%20un%20Développeur%20Web%20talentueux%20pour%20rejoindre%20notre%20équipe.&qualifications=Diplôme%20en%20informatique%20ou%20domaine%20connexe.%20Expérience%20de%202%20ans%20minimum%20en%20développement%20web.&experience=2%20ans%20minimum">
            Développeur Web
          </a> - Poste basé à Bamako
        </li>
        <li>
          <a href="job-details.html?title=Gestionnaire%20RH&location=Bamako&contract=CDI&salary=700000%20FCFA%20par%20mois&company=Human%20Resources%20Corp&description=Nous%20cherchons%20un%20gestionnaire%20des%20ressources%20humaines.&qualifications=Diplôme%20en%20Ressources%20Humaines%20ou%20domaine%20connexe.&experience=2%20ans%20minimum">
            Gestionnaire RH
          </a> - Poste basé à Bamako
        </li>
        <li>
          <a href="job-details.html?title=Chef%20de%20Projet&location=Mopti&contract=CDI&salary=900000%20FCFA%20par%20mois&company=Project%20Solutions&description=Un%20chef%20de%20projet%20pour%20coordonner%20des%20projets.&qualifications=Diplôme%20en%20Gestion%20de%20Projet.%20Certifications%20PMP%20souhaitées.&experience=3%20ans%20minimum">
            Chef de Projet
          </a> - Poste basé à Mopti
        </li>
        <li>
          <a href="job-details.html?title=Comptable&location=Ségou&contract=CDI&salary=600000%20FCFA%20par%20mois&company=Finance%20Plus&description=Un%20comptable%20pour%20gérer%20les%20finances.&qualifications=Diplôme%20en%20Comptabilité.%20Expérience%20de%202%20ans.&experience=2%20ans%20minimum">
            Comptable
          </a> - Poste basé à Ségou
        </li>
        <li>
          <a href="job-details.html?title=Médecin&location=Kayes&contract=CDI&salary=1200000%20FCFA%20par%20mois&company=Clinique%20de%20Kayes&description=Nous%20recrutons%20un%20médecin.&qualifications=Diplôme%20en%20Médecine.&experience=3%20ans%20minimum">
            Médecin
          </a> - Poste basé à Kayes
        </li>
      </ul>
    </div>
  </section>

  <!-- Section Candidature -->
  <section id="apply">
    <div class="container">
      <h2>Soumettre une candidature</h2>
      <form id="application-form">
        <label for="name">Nom :</label>
        <input type="text" id="name" name="name" required>

        <label for="first">Prénom :</label>
        <input type="text" id="first" name="first" required>

        <label for="tel">Téléphone :</label>
        <input type="text" id="tel" name="tel" required>

        <label for="email">Email :</label>
        <input type="email" id="email" name="email" required>

        <label for="password">Mot de Passe :</label>
        <input type="password" id="password" name="password" required>

        <label for="job">Poste souhaité :</label>
        <select id="job" name="job">
          <option value="web-developer">Développeur Web</option>
          <option value="hr-manager">Gestionnaire RH</option>
          <option value="project-manager">Chef de Projet</option>
          <option value="reseaux">Administrateur Réseaux</option>
          <option value="comptable">Comptable</option>
          <option value="medecin">Médecin</option>
          <option value="infirmier">Infirmier</option>
        </select>

        <label for="cv">Téléchargez votre CV :</label>
        <input type="file" id="cv" name="cv" accept=".pdf, .doc, .docx" required>

        <button type="submit">Envoyer</button>
      </form>
    </div>
  </section>

  <!-- Section Contact -->
  <section id="contact">
    <div class="container">
      <h2>Contactez-nous</h2>
      <p>Email : contact@recrutementpro.com</p>
      <p>Téléphone : +223 72 77 58 83</p>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2024 Recrutement Pro. Tous droits réservés.</p>
    </div>
  </footer>

  <!-- Script principal -->
  <script>
    // Gestion du formulaire
    document.querySelector("#application-form").addEventListener("submit", (e) => {
      e.preventDefault();

      // Récupération des données
      const name = document.getElementById("name").value;
      const first = document.getElementById("first").value;
      const tel = document.getElementById("tel").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const job = document.getElementById("job").value;
      const cvFile = document.getElementById("cv").files[0];

      if (!cvFile) {
        alert("Veuillez téléverser un CV.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function () {
        const fileContent = reader.result;

        db.collection("candidatures")
          .add({
            name,
            first,
            tel,
            email,
            password,
            job,
            cv: fileContent,
            created_at: new Date()
          })
          .then(() => {
            alert("Votre candidature a été enregistrée avec succès !");
            document.querySelector("#application-form").reset();
          })
          .catch((error) => {
            console.error("Erreur lors de l'enregistrement :", error);
            alert("Une erreur est survenue. Veuillez réessayer.");
          });
      };
      reader.readAsDataURL(cvFile);
    });

    // Gestion de la caméra
    document.getElementById('startCamera').addEventListener('click', async () => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        const videoElement = document.getElementById('video');
        const videoContainer = document.querySelector('.video-container');

        videoElement.srcObject = stream;
        videoContainer.style.display = 'block';

        const cameraBtn = document.getElementById('startCamera');
        cameraBtn.innerHTML = '<i class="fas fa-check-circle"></i> Caméra activée';
        cameraBtn.style.backgroundColor = '#28a745';
        cameraBtn.disabled = true;
      } catch (error) {
        alert("Erreur : " + error.message);
        console.error("Erreur d'accès à la caméra:", error);
      }
    });
  </script>
</body>
</html>
